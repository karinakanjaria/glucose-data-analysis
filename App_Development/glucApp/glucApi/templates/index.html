{% load static %}
<!doctype html>
<html lang="en">
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="glucApi/font-awesome-4.7.0/css/font-awesome.min.css">
  
  <head>
    <title>DiaBeatIt!</title>
  </head>
  
  <style>
    .titleFont {
      font-family: Georgia, 'Times New Roman', Times, serif ;
    }

    .mainGreen {
      color: #458636;      
    }

    .yellowText {
      color: #c49936;
    }
    
    .backgroundGreen {
      background-color: #dcf2e1;
    }
    
    .underlineText {
      text-underline-position: under !important;
    }

    .diaImg {
      height: 110px;
      width: auto;
    }
    
    .borderGreen {
      border-color: #458636 !important; 
      border-width: 5px !important;
    }
    
    .blackLine {
      background: darkgrey;
      height: 1px;
    }
    </style>

<body>
    <div class="container mt-5">
      <div class="row d-flex align-items-center">
        <div class="col-lg-2 col-sm-3 text-center">
          <img class="diaImg" src="{% static 'diabeatit_green.jpeg' %}"/>
          <!-- <img alt="DiabeatIt logo"/> -->
        </div>
        <div class="col-lg-10 col-sm-9">
          <div class='h1 mainGreen titleFont'><strong>Welcome back to DiabeatIt!</strong></div>
        </div>
      </div>
    </div>
    <div class="container mt-2">
      Your glucose monitor data has been uploaded. The previous days' time out of range and tomorrow's predicted time out of range can be found below, with further details on what factors are influencing this prediction further down.
      Please sign in to receive your results.
    </div>

    <div class="container mt-3">
      <div class="card">
        <div class="card-body">
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="patientId">Patient ID Number</label>
                <input type="number" class="form-control" id="patientId">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="patientDate">Password</label>
                <input type="password" class="form-control" id="patientPassword">
              </div>
            </div>
            <div class="col-12">
              <div class="float-right">
                <div class="btn btn-primary btn-sm" id="submitForm">Submit</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
   
    <div class="container mt-3">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">
              <div>This Week's Time Out of Healthy Range Compared to Previous Day</div>
              <hr/>
            </h5>
            <div class="row">
              <div class="col-lg-2">
                <div class="card h-100">
                  <div class="card-body backgroundGreen">
                    <h6 class="card-title text-center">
                      May 15th
                    </h6>
                    <hr/>
                    <div class="text-center">
                      <h6 class="lead-bold mainGreen"><strong>Reduced <h4>2 hrs<br/> 15 mins</h4></strong></h6>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-2">
                <div class="card h-100">
                  <div class="card-body backgroundGreen">
                    <h6 class="card-title text-center">
                      May 16th
                    </h6>
                    <hr/>
                    <div class="text-center">
                      <h6 class="lead-bold yellowText"><strong>Increased <h4>3 hrs <br/> 30 mins</h4></strong></h6>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-2">
                <div class="card h-100">
                  <div class="card-body backgroundGreen">
                    <h6 class="card-title text-center">
                      May 17th
                    </h6>
                    <hr/>
                    <div class="text-center">
                      <h6 class="lead-bold mainGreen"><strong>Reduced <h4>1hrs<br/>20mins</h4></strong></h6>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-2">
                <div class="card h-100">
                  <div class="card-body backgroundGreen">
                    <h6 class="card-title text-center">
                      May 18th
                    </h6>
                    <hr/>
                    <div class="text-center">
                      <h6 class="lead-bold yellowText"><strong>Increased <h4>5hrs<br/>0 mins</h4></strong></h6>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-2">
                <div class="card h-100">
                  <div class="card-body backgroundGreen">
                    <h6 class="card-title text-center">
                      May 19th
                    </h6>
                    <hr/>
                    <div class="text-center">
                      <h6 class="lead-bold mainGreen"><strong>Reduced <h4>3 hrs <br/> 10 mins</h4></strong></h6>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-lg-2">
                <div class="card h-100 borderGreen">
                  <div class="card-body backgroundGreen">
                    <h6 class="card-title text-center">
                      May 20th
                    </h6>
                    <hr/>
                    <div class="text-center">
                      <h6 class="lead-bold mainGreen"><strong>Reduced <h4>4hrs<br/>10 mins</h4></strong></h6>
                      <div class="float-right">
                        <button class="btn btn-success btn-small pt-0 pb-0 pl-1 pr-1" id="clickMore">
                          â–¼
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>             
            </div>    
            <div id="moreDetails">
              <i class="fa fa-caret-down" aria-hidden="true"></i>
              <hr class="blackLine"/>
              
              <div class="card-title mt-3">
                  <h4>Your Results Explained</h4>
              </div>
              <hr class="mt-0"/>
              <div>
                <div class="pl-2">
                <div class="row">
                <div class="col-lg-4 titleFont d-flex align-items-center">
                    <h4>1. Sleep Quality</h4>
                </div>
                <div class="col-lg-8">
                  <div>Your time out of range tomorrow is predicted to change based on your previous night of sleep.
                    To further reduce your unheathly time tomorrow, you may want to prioritize:</div>
                  <ul>
                    <li>More hours of sleep</li>
                    <li>Uninterrupted sleep</li>
                    <li>Sleeping during dark hours rather than daylight hours</li>
                  </ul>
                </div>
                </div>
                <div class="row border-top pt-3">
                  <div class="col-lg-4 titleFont d-flex align-items-center">
                    <h4>2. Fluctuation Velocity</h4>
                  </div>
                  <div class="col-lg-8">
                    <div>Your time out of range tomorrow is heavily influenced by the velocity of your fluctuations.
                      To further reduce your unheathly time tomorrow, you may want to prioritize:</div>
                    <ul>
                      <li>Eating more protein to prevent spikes due to eating</li>
                      <li>Eating after working out to prevent quick drops</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    </div>
  </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  
    <script>
      $(document).ready(function(){

        $('#moreDetails').hide()
        
        $('#submitForm').on('click', function(){
          let patientId = $('#patientId').val()
          let patientPassword = $('#patientPassword').val()

          $.ajax({
              type: "GET",
              url: "GetPatientInfo",
              data: {
                'patientId': patientId,
                'patientPassword': patientPassword
               },
              contentType: "application/json",
              dataType: 'json',
              success: function(response){
                console.log(response['success'])
                console.log(response['youDidIt'])
              }
          })
        })

      $('#clickMore').on('click', function(){
          $('#moreDetails').toggle()
      })

      })
    </script>

  </body>
</html>
